{% extends "base.html" %}
{% block title %}Owner's Blog{% endblock %}
{% block content %}
<div class="container">
    <div class="card-panel">
        <h2>Owner's Blog</h2>
        {% if session.get('is_admin') %}
        <p><a href="{{ url_for('create_blog_post') }}" class="btn waves-effect waves-light">Create New Post</a></p>
        {% endif %}
        <ul class="collection">
            {% for post in posts %}
            <li class="collection-item avatar">
                <i class="material-icons circle green">rate_review</i>
                <span class="title"><a href="{{ url_for('view_blog_post', post_id=post.id) }}">{{ post.title }}</a></span>
                <p>By {{ post.author.username }} on {{ post.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
                {% if session.get('is_admin') %}
                <div class="secondary-content">
                    <a href="{{ url_for('edit_blog_post', post_id=post.id) }}" class="btn-small waves-effect waves-light blue"><i class="material-icons">edit</i></a>
                    <form action="{{ url_for('delete_blog_post', post_id=post.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn-small waves-effect waves-light red" onclick="return confirm('Are you sure you want to delete this post?')"><i class="material-icons">delete</i></button>
                    </form>
                </div>
                {% else %}
                <a href="{{ url_for('view_blog_post', post_id=post.id) }}" class="secondary-content"><i class="material-icons">send</i></a>
                {% endif %}
            </li>
            {% else %}
            <li class="collection-item">No blog posts yet.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}